<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <style>
    #table{
      width: 1000px;
      border-collapse: collapse;
    }
    #table td, #table th{
      border: 1px solid #000;
      padding: 4px;
      text-align: center;
    }
    .w80{
      width: 80px;
    }
    .w120{
      width: 120px;
    }
    .w150{
      width: 150px;
    }
  </style>
</head>
<body>
<article id="wrap">
  <header>
    <h1>Group Checkbox연습</h1>
  </header>
  <div>
    <table id="table">
      <caption>그룹체크박스 테이블</caption>
      <thead>
      <tr>
        <th class="w80">번호</th>
        <th class="w150">이름</th>
        <th class="w120"><input type="checkbox" id="r0"/><span>그룹1</span></th>
        <th class="w120"><input type="checkbox" id="r1"/><span>그룹2</span></th>
        <th class="w120"><input type="checkbox" id="r2"/><span>그룹3</span></th>
        <th class="w120"><input type="checkbox" id="r3"/><span>그룹4</span></th>
        <th class="w120"><input type="checkbox" id="r4"/><span>그룹5</span></th>
        <th>비고</th>
      </tr>
      </thead>
      <tbody>
      <tr>
        <td>1</td>
        <td>마루치</td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td></td>
      </tr>
      <tr>
        <td>2</td>
        <td>이도</td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td></td>
      </tr>
      <tr>
        <td>3</td>
        <td>일지매</td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td></td>
      </tr>
      <tr>
        <td>4</td>
        <td>을불</td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td></td>
      </tr>
      <tr>
        <td>5</td>
        <td>창조리</td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td></td>
      </tr>
      <tr>
        <td>6</td>
        <td>이순신</td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td></td>
      </tr>
      <tr>
        <td>7</td>
        <td>송태섭</td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td><input type="checkbox" value="1"/></td>
        <td></td>
      </tr>
      </tbody>
    </table>
  </div>
</article>

<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
<script>
  $(function (){
    /*
    $("#r0").click(function (){
      //각 행의 3번째 td에 있는 체크박스들 선택
      let ar = $("#table tbody td:nth-child(3)").find(":checkbox");

      //배열의 모든 체크박스들의 상태를 r0과 같은 상태로 지정한다.
      ar.prop("checked", this.checked);
    });
    $("#r1").click(function (){
      //각 행의 4번째 td에 있는 체크박스들 선택
      let ar = $("#table tbody td:nth-child(4)").find(":checkbox");

      //배열의 모든 체크박스들의 상태를 r0과 같은 상태로 지정한다.
      ar.prop("checked", this.checked);
    });
    $("#r2").click(function (){
      //각 행의 5번째 td에 있는 체크박스들 선택
      let ar = $("#table tbody td:nth-child(5)").find(":checkbox");

      //배열의 모든 체크박스들의 상태를 r0과 같은 상태로 지정한다.
      ar.prop("checked", this.checked);
    });
    */


    $("#table thead input:checkbox").click(function (){
      //console.log("TT");
      // 클릭한 checkbox의 가장 가까운 태그(상위태그)를 알아낸다.
      //let p = $(this).parent(); //th
      let p = $(this).closest("th");// 현재 클릭한 체크박스의 가장 가까운 태그(th)

      // 앞서 구한 부모태그(th)가 해당 행(tr)에서 몇번째 요소인지
      // 인덱스를 알아내자
      let idx = $("#table thead tr th").index(p);
      console.log(idx);

      // 구한 index값을 가지고 tbody에 있는 각 행에서
      // 해당 idx+1번째에 있는 td안의 체크박스들을 얻어낸다.
      let ar = $("#table tbody td:nth-child("+(idx+1)+") input:checkbox");
      ar.prop("checked", this.checked);
    });


  });
</script>
</body>
</html>
